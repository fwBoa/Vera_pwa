<div class="min-h-screen font-['Inter'] relative overflow-hidden">
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
        <img src="image_fond.png" alt="" class="w-full h-full object-cover opacity-100">
        <!-- Overlay to ensure text readability if needed, though design shows clear text -->
        <div class="absolute inset-0 bg-vera-beige/30 mix-blend-multiply"></div>
    </div>

    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content"
        class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-6 focus:py-3 focus:bg-vera-dark focus:text-white focus:rounded-lg focus:shadow-lg">
        Aller au contenu principal
    </a>

    <!-- Navigation -->
    <nav class="w-full pt-6 px-6 sm:px-12 flex justify-between items-center relative z-10" role="navigation"
        aria-label="Navigation principale">
        <!-- Logo Vera -->
        <div class="flex items-center">
            <img src="/logos/Logo/size=M, color=black.png" alt="Logo Vera" class="h-8 sm:h-10">
        </div>

        <!-- Right Menu -->
        <div class="flex items-center space-x-6">
            <button type="button"
                class="bg-[#C5E898] hover:bg-[#b0d680] text-vera-dark font-medium px-6 py-2 rounded-full transition-colors shadow-sm text-sm sm:text-base"
                aria-label="Comment ça marche">
                Comment ça marche ?
            </button>

            <!-- Auth Button (Hidden for now based on design, or kept minimal) -->
            <button *ngIf="isAuthenticated" (click)="logout()" aria-label="Se déconnecter"
                class="hidden sm:block text-sm text-vera-gray hover:text-vera-dark transition-colors">
                (Déconnexion)
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content"
        class="relative z-10 flex flex-col items-center justify-center min-h-[75vh] px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto text-center"
        role="main">

        <!-- Hero Section -->
        <header class="mb-12 sm:mb-16 animate-fade-in-up w-full max-w-4xl">
            <h1
                class="text-4xl sm:text-5xl lg:text-6xl font-['Playfair_Display'] text-vera-dark mb-6 leading-tight tracking-tight">
                Vérifie instantanément n’importe quelle info
            </h1>
            <p class="text-base sm:text-lg text-vera-dark/80 max-w-2xl mx-auto font-light leading-relaxed">
                Texte, image, vidéo, audio, URL : Vera te dit en 3 secondes si c’est vrai ou faux, sources à l’appui.
            </p>
        </header>

        <!-- Search Input Section -->
        <section class="w-full max-w-3xl mx-auto relative z-10" aria-labelledby="form-title">
            <h2 id="form-title" class="sr-only">Formulaire de vérification</h2>

            <form [formGroup]="factCheckForm" (ngSubmit)="onSubmit()" class="relative w-full group"
                aria-label="Formulaire de fact-checking">

                <!-- Pill Shaped Input Container -->
                <div
                    class="relative flex items-center w-full bg-[#2D2D2D] rounded-full shadow-2xl transition-all duration-300 hover:shadow-3xl focus-within:ring-4 focus-within:ring-vera-dark/20 overflow-hidden">

                    <!-- Plus Icon (Upload/Add) -->
                    <button type="button"
                        class="pl-5 sm:pl-6 pr-3 sm:pr-4 text-gray-400 hover:text-white transition-colors focus:outline-none"
                        aria-label="Ajouter un fichier">
                        <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4">
                            </path>
                        </svg>
                    </button>

                    <!-- Input Field -->
                    <input type="text" id="query" formControlName="query" placeholder="La vérité, en un clic..."
                        autocomplete="off" aria-required="true"
                        class="w-full py-4 sm:py-5 bg-transparent text-white placeholder-gray-400 text-base sm:text-lg border-none focus:ring-0 outline-none truncate" />

                    <!-- Microphone Icon (Voice) -->
                    <button type="button"
                        class="pr-5 sm:pr-6 pl-3 sm:pl-4 text-gray-400 hover:text-white transition-colors focus:outline-none"
                        aria-label="Recherche vocale">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z">
                            </path>
                        </svg>
                    </button>

                    <!-- Submit Button (Hidden visually but accessible via Enter) -->
                    <button type="submit" [disabled]="!factCheckForm.valid || isLoading"
                        class="sr-only">Vérifier</button>
                </div>

                <!-- Loading Indicator -->
                <div *ngIf="isLoading" class="absolute -bottom-12 left-0 right-0 flex justify-center">
                    <span
                        class="flex items-center text-vera-dark font-medium bg-white/50 backdrop-blur-sm px-4 py-1 rounded-full">
                        <svg class="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"
                                fill="none"></circle>
                            <path class="opacity-75" fill="currentColor"
                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                            </path>
                        </svg>
                        Analyse en cours...
                    </span>
                </div>
            </form>
        </section>

        <!-- Error Message -->
        <div *ngIf="errorMessage"
            class="mt-8 max-w-2xl mx-auto bg-vera-pink border border-red-200 rounded-xl p-4 flex items-center text-left animate-fade-in shadow-lg"
            role="alert">
            <svg class="w-5 h-5 text-red-700 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                    clip-rule="evenodd"></path>
            </svg>
            <span class="text-red-800">{{ errorMessage }}</span>
        </div>

        <!-- Results Section -->
        <section *ngIf="result" class="mt-16 w-full max-w-4xl mx-auto text-left animate-fade-in-up" aria-live="polite">
            <div class="bg-white/90 backdrop-blur-md rounded-3xl shadow-xl border border-white/50 p-6 sm:p-12">
                <div class="flex items-center mb-6">
                    <div class="w-10 h-10 bg-[#C5E898] rounded-full flex items-center justify-center mr-4 shadow-sm">
                        <svg class="w-6 h-6 text-vera-dark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold font-['Playfair_Display'] text-vera-dark">Résultat de l'analyse</h2>
                </div>

                <div
                    class="prose prose-lg max-w-none text-vera-dark leading-relaxed whitespace-pre-wrap streaming-text">
                    {{ result }}<span *ngIf="isLoading" class="cursor-blink">|</span>
                </div>

                <div class="mt-8 flex justify-end">
                    <button (click)="clearResult()"
                        class="text-sm text-vera-gray hover:text-vera-dark underline underline-offset-4 transition-colors">
                        Nouvelle recherche
                    </button>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="absolute bottom-0 w-full py-4 text-center bg-[#C5E898] z-10" role="contentinfo">
        <p class="text-vera-dark text-xs sm:text-sm font-medium">© 2025 Vera. All rights reserved.</p>
    </footer>
</div>